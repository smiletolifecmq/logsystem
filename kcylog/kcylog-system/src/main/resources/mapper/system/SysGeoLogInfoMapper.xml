<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kcylog.system.mapper.SysGeoLogInfoMapper">
    
    <resultMap type="SysGeoLogInfo" id="SysGeoLogInfoResult">
        <result property="logInfoId"    column="log_info_id"    />
        <result property="logId"    column="log_id"    />
        <result property="typeArr"    column="type_arr"    />
        <result property="typeId"    column="type_id"    />
        <result property="difficulty"    column="difficulty"    />
        <result property="difficultyDegree"    column="difficulty_degree"    />
        <result property="logDate"    column="log_date"    />
        <result property="workload"    column="workload"    />
        <result property="workdetail"    column="workdetail"    />
        <result property="typeMoney"    column="type_money"    />
        <result property="projectId"    column="project_id"    />
        <result property="degree"    column="degree"    />
        <association property="geoType" javaType="SysGeoType" resultMap="SysGeoTypeResult"/>
    </resultMap>

    <resultMap type="SysGeoType" id="SysGeoTypeResult">
        <result property="typeName"    column="type_name"    />
        <result property="unit"    column="unit"    />
    </resultMap>

    <sql id="selectSysGeoLogInfoVo">
        select log_info_id, log_id, type_arr, type_id, difficulty, difficulty_degree, log_date, workload, workdetail, type_money, project_id, degree from sys_geo_log_info
    </sql>

    <sql id="selectSysGeoLogInfoDetail">
        select a.*,b.type_name,b.unit from sys_geo_log_info a inner join sys_geo_type b on a.type_id = b.type_id
    </sql>

    <select id="selectSysGeoLogInfoList" parameterType="SysGeoLogInfo" resultMap="SysGeoLogInfoResult">
        <include refid="selectSysGeoLogInfoVo"/>
        <where>  
            <if test="logId != null "> and log_id = #{logId}</if>
            <if test="typeArr != null  and typeArr != ''"> and type_arr = #{typeArr}</if>
            <if test="typeId != null "> and type_id = #{typeId}</if>
            <if test="difficulty != null "> and difficulty = #{difficulty}</if>
            <if test="difficultyDegree != null "> and difficulty_degree = #{difficultyDegree}</if>
            <if test="logDate != null "> and log_date = #{logDate}</if>
            <if test="workload != null "> and workload = #{workload}</if>
            <if test="workdetail != null "> and workdetail = #{workdetail}</if>
            <if test="typeMoney != null "> and type_money = #{typeMoney}</if>
            <if test="projectId != null "> and project_id = #{projectId}</if>
        </where>
    </select>
    
    <select id="selectSysGeoLogInfoByLogInfoId" parameterType="Long" resultMap="SysGeoLogInfoResult">
        <include refid="selectSysGeoLogInfoVo"/>
        where log_info_id = #{logInfoId}
    </select>
        
    <insert id="insertSysGeoLogInfo" parameterType="SysGeoLogInfo" useGeneratedKeys="true" keyProperty="logInfoId">
        insert into sys_geo_log_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="logId != null">log_id,</if>
            <if test="typeArr != null">type_arr,</if>
            <if test="typeId != null">type_id,</if>
            <if test="difficulty != null">difficulty,</if>
            <if test="difficultyDegree != null">difficulty_degree,</if>
            <if test="logDate != null">log_date,</if>
            <if test="workload != null">workload,</if>
            <if test="workdetail != null">workdetail,</if>
            <if test="typeMoney != null">type_money,</if>
            <if test="projectId != null">project_id,</if>
            <if test="degree != null">degree,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="logId != null">#{logId},</if>
            <if test="typeArr != null">#{typeArr},</if>
            <if test="typeId != null">#{typeId},</if>
            <if test="difficulty != null">#{difficulty},</if>
            <if test="difficultyDegree != null">#{difficultyDegree},</if>
            <if test="logDate != null">#{logDate},</if>
            <if test="workload != null">#{workload},</if>
            <if test="workdetail != null">#{workdetail},</if>
            <if test="typeMoney != null">#{typeMoney},</if>
            <if test="projectId != null">#{projectId},</if>
            <if test="degree != null">#{degree},</if>
         </trim>
    </insert>

    <update id="updateSysGeoLogInfo" parameterType="SysGeoLogInfo">
        update sys_geo_log_info
        <trim prefix="SET" suffixOverrides=",">
            <if test="logId != null">log_id = #{logId},</if>
            <if test="typeArr != null">type_arr = #{typeArr},</if>
            <if test="typeId != null">type_id = #{typeId},</if>
            <if test="difficulty != null">difficulty = #{difficulty},</if>
            <if test="difficultyDegree != null">difficulty_degree = #{difficultyDegree},</if>
            <if test="logDate != null">log_date = #{logDate},</if>
            <if test="workload != null">workload = #{workload},</if>
            <if test="workdetail != null">workdetail = #{workdetail},</if>
            <if test="typeMoney != null">type_money = #{typeMoney},</if>
            <if test="projectId != null">project_id = #{projectId},</if>
            <if test="degree != null">degree = #{degree},</if>
        </trim>
        where log_info_id = #{logInfoId}
    </update>

    <delete id="deleteSysGeoLogInfoByLogInfoId" parameterType="Long">
        delete from sys_geo_log_info where log_info_id = #{logInfoId}
    </delete>

    <delete id="deleteSysGeoLogInfoByLogInfoIds" parameterType="String">
        delete from sys_geo_log_info where log_info_id in 
        <foreach item="logInfoId" collection="array" open="(" separator="," close=")">
            #{logInfoId}
        </foreach>
    </delete>

    <delete id="deleteSysGeoLogInfoByLogIds" parameterType="String">
        delete from sys_geo_log_info where log_id in
        <foreach item="logId" collection="array" open="(" separator="," close=")">
            #{logId}
        </foreach>
    </delete>

    <select id="selectSysGeoLogInfoByProjectId" parameterType="String" resultMap="SysGeoLogInfoResult">
        <include refid="selectSysGeoLogInfoVo"/>
        where project_id in
        <foreach item="projectId" collection="array" open="(" separator="," close=")">
            #{projectId}
        </foreach>
    </select>

    <select id="selectSysGeoLogInfoByLogIds" parameterType="java.util.List" resultMap="SysGeoLogInfoResult">
        <include refid="selectSysGeoLogInfoDetail"/>
        where log_id in
        <foreach item="logId" collection="list" open="(" separator="," close=")">
            #{logId}
        </foreach>
    </select>
</mapper>